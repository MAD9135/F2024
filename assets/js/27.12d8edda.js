(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{469:function(t,a,s){"use strict";s.r(a);var e=s(53),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("PageHeader"),t._v(" "),s("h2",{attrs:{id:"futures"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#futures"}},[t._v("#")]),t._v(" Futures")]),t._v(" "),s("p",[t._v("Futures are part of "),s("code",[t._v("Dart:core")]),t._v(". They looks a lot like JS Promises. The three states that a Future object can be in are: "),s("code",[t._v("uncompleted")]),t._v(", "),s("code",[t._v("completed with data")]),t._v(", or "),s("code",[t._v("completed with error")]),t._v(".")]),t._v(" "),s("p",[t._v("There are a number of other classes that we use that return Futures. HTTP requests return a Future. "),s("code",[t._v("SharedPreferences.getInstance")]),t._v(" returns a Future. We will be talking more about "),s("code",[t._v("SharedPreferences")]),t._v("\nnext week when talking about Data Persistence.")]),t._v(" "),s("YouTube",{attrs:{title:"Futures in Dart",url:"https://www.youtube.com/embed/OTS-ap9_aXc"}}),t._v(" "),s("p",[t._v("Here is an example that shows a "),s("code",[t._v("Future")]),t._v(" created by an HTTP Request.")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ElevatedButton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  onPressed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" myFuture "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://example.com/some/image.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    myFuture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_myHandleResponse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catchError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Caught $err'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("whenComplete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//just like finally in JS")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//runs after either then() or catchError()")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Click to load'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("Here is an example of a generic "),s("code",[t._v("Future")]),t._v(", think JS Promise.")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dart:async'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//important to remember to import this")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dart:async gives us `Future`")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" myFuture "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Future")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//code here will run second")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//code here will run first")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("A "),s("code",[t._v("Future.value()")]),t._v(" is like the JavaScript "),s("code",[t._v("Promise.resolve()")]),t._v(".")]),t._v(" "),s("p",[t._v("A "),s("code",[t._v("Future.error(Exception())")]),t._v(" is like the JavaScript "),s("code",[t._v("Promise.reject(new Error())")]),t._v(".")]),t._v(" "),s("p",[t._v("A "),s("code",[t._v("then().catchError( (err){ })")]),t._v(" is like the JavaScript "),s("code",[t._v("then().catch( function(err){ })")]),t._v(".")]),t._v(" "),s("p",[t._v("One of the common things we do in JS is to wrap a setTimeout in a Promise to use as a function that delays something in our code from running. In Dart, a "),s("code",[t._v("Future")]),t._v(" has a method called "),s("code",[t._v("delayed")]),t._v(" which\ndoes exactly this. The example below will run the Duration Widget for 5 seconds and then call the second parameter function as if it were "),s("code",[t._v("Future.value(12)")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" myFuture "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Future"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("int"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delayed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Duration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//notice the comma after Duration(), not a semi-colon")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("If you want, you can chain a "),s("code",[t._v(".then()")]),t._v(" on to the end of that call to "),s("code",[t._v("Future.delayed")]),t._v(". If you want to handle errors on your "),s("code",[t._v("Future")]),t._v(" (and you always should), then chain a "),s("code",[t._v(".catchError((err) { })")]),t._v("\nafter the "),s("code",[t._v(".then()")]),t._v(". Unlike JavaScript Promises, you can add a "),s("code",[t._v(".catchError")]),t._v(" after each "),s("code",[t._v(".then")]),t._v(".")]),t._v(" "),s("p",[t._v("At the end of your chain of "),s("code",[t._v("then")]),t._v(" and "),s("code",[t._v("catchError")]),t._v(" functions you can add a "),s("code",[t._v(".whenComplete()")]),t._v(" to the end of the chain. It will always run after either the last "),s("code",[t._v(".then")]),t._v(" or "),s("code",[t._v(".catchError")]),t._v(".")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://api.flutter.dev/flutter/dart-async/Future/Future.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Future reference"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"async-await"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-await"}},[t._v("#")]),t._v(" Async / Await")]),t._v(" "),s("YouTube",{attrs:{title:"async await in Dart",url:"https://www.youtube.com/embed/SmTCmDMi4BY"}}),t._v(" "),s("p",[t._v("In Dart the "),s("code",[t._v("async")]),t._v(" and "),s("code",[t._v("await")]),t._v(" works like "),s("code",[t._v("async / await")]),t._v(" in JavaScript. You can use a series of "),s("code",[t._v("await")]),t._v(" wrapped commands instead of chained "),s("code",[t._v("then")]),t._v(" methods.")]),t._v(" "),s("h2",{attrs:{id:"json-encode-and-decode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#json-encode-and-decode"}},[t._v("#")]),t._v(" JSON encode and decode")]),t._v(" "),s("p",[t._v("In our Flutter apps, to work with JSON being sent and received from an API, we need to import the ("),s("code",[t._v("data:convert")]),t._v(" library](https://api.flutter.dev/flutter/dart-convert/dart-convert-library.html). When\nwriting a Flutter app, we automatically have access to anything in the "),s("code",[t._v("dart:core")]),t._v(" library but other dart functionality and classes need to be imported.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("dart:convert")]),t._v(" library includes lots of methods for converting between different formats of strings. We will be focused on the "),s("code",[t._v("JsonDecoder")]),t._v(" and "),s("code",[t._v("JsonEncoder")]),t._v(" classes.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://api.flutter.dev/flutter/dart-convert/JsonDecoder-class.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonDecoder class reference"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://api.flutter.dev/flutter/dart-convert/JsonEncoder-class.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonEncoder class reference"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Simple HttpHelper class for making http requests")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dart:convert'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//gives us jsonDecode and jsonEncode")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dart:async'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//gives us Future")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'package:http/http.dart'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("as")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//we can give names to the packages we import")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHelper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//skipping over any variable declarations for domain, path, params")]),t._v("\n\n  Future"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//we could create our own custom object in the Future")]),t._v("\n\n    Uri uri "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("domain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Uri in dart:core")]),t._v("\n    http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Response response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//http get request")]),t._v("\n    Map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dynamic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonDecode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//convert the json String in the response body")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// into a Map object with String keys.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("p",[t._v("Here is the "),s("a",{attrs:{href:"https://docs.flutter.dev/development/data-and-backend/json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dart Guide to working with JSON"),s("OutboundLink")],1),t._v(". It talks about how to serialize and deserialize JSON.")]),t._v(" "),s("h2",{attrs:{id:"ide-api-library-framework-and-sdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ide-api-library-framework-and-sdk"}},[t._v("#")]),t._v(" IDE, API, Library, Framework, and SDK")]),t._v(" "),s("p",[t._v("Ever wonder what the difference is between these five things - "),s("code",[t._v("IDE")]),t._v(", "),s("code",[t._v("API")]),t._v(", "),s("code",[t._v("Library")]),t._v(", "),s("code",[t._v("Framework")]),t._v(", and "),s("code",[t._v("SDK")]),t._v("?")]),t._v(" "),s("p",[t._v("While there are different interpretations with different types of programming and disagreements between developers about the finer points, here is a general reference to what each is:")]),t._v(" "),s("p",[s("strong",[t._v("IDE")]),t._v(" is an Integrated Development Environment. This is a text editor on steroids. It has features that help developers write and compile their code, as well as, manage all their projects. Usually,\nthey have integrations with Source Control (Git) too.")]),t._v(" "),s("p",[s("strong",[t._v("API")]),t._v(" is an Application Programming Interface. This is a group of functions or server-side endpoints that let another program access a service or data-source.")]),t._v(" "),s("p",[s("strong",[t._v("Library")]),t._v(" is one or more files that use the same programming language as your project. They can be included in your project to provide pre-tested code that will speed up your development work.")]),t._v(" "),s("p",[s("strong",[t._v("Framework")]),t._v(" is similar to a library but will typically "),s("em",[t._v("also")]),t._v(" include UI components, design assets, best practice guidance, and conventions to follow.")]),t._v(" "),s("p",[s("strong",[t._v("SDK")]),t._v(" is a software development kit. It tends to be the largest of all of these. It will often include a library or framework. Most importantly, it will include tools that you need in order to\ndevelop for your target platforms, such as a compiler or testing tools.")]),t._v(" "),s("h2",{attrs:{id:"http-package"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-package"}},[t._v("#")]),t._v(" Http Package")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("http")]),t._v(" package comes from the "),s("a",{attrs:{href:"https://pub.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pub.dev"),s("OutboundLink")],1),t._v(" site. Here is the link to the "),s("a",{attrs:{href:"https://pub.dev/packages/http",target:"_blank",rel:"noopener noreferrer"}},[t._v("http package"),s("OutboundLink")],1),t._v(" and here is the\n"),s("a",{attrs:{href:"https://pub.dev/documentation/http/latest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("API documentation for http"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Dart core has "),s("a",{attrs:{href:"https://api.flutter.dev/flutter/dart-core/Uri-class.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("a "),s("code",[t._v("Uri")]),t._v(" class"),s("OutboundLink")],1),t._v(" for creating or parsing URLs from Strings.")]),t._v(" "),s("p",[t._v("To make a single "),s("code",[t._v("http")]),t._v("request from your app you can use the "),s("code",[t._v("http.post")]),t._v(", "),s("code",[t._v("http.get")]),t._v(", "),s("code",[t._v("http.delete")]),t._v(", "),s("code",[t._v("http.head")]),t._v(", "),s("code",[t._v("http.patch")]),t._v(", or "),s("code",[t._v("http.put")]),t._v(" methods.")]),t._v(" "),s("p",[t._v("If you want to make a series of requests then you can use an async await function with an "),s("code",[t._v("http.Client()")]),t._v(" object. Create the client and use the client as a wrapper for all the get and post calls. Use\n"),s("code",[t._v("await")]),t._v(" in front of each of the calls to wait for the response before moving to the next one.")]),t._v(" "),s("h4",{attrs:{id:"alternative"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alternative"}},[t._v("#")]),t._v(" Alternative")]),t._v(" "),s("p",[t._v("Here is the "),s("a",{attrs:{href:"https://dart.dev/guides/libraries/library-tour#using-http-resources-with-httprequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dart guide to working with HTTP Requests"),s("OutboundLink")],1),t._v(". This guide talks about using the "),s("code",[t._v("HttpRequest")]),t._v(" package\nthat is part of Dart, instead of the "),s("code",[t._v("http")]),t._v(" package that we imported from "),s("code",[t._v("pub.dev")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"custom-data-model-classes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-data-model-classes"}},[t._v("#")]),t._v(" Custom Data Model Classes")]),t._v(" "),s("p",[t._v("When you make a "),s("code",[t._v("fetch")]),t._v(" call in a web app we use "),s("code",[t._v("JSON.parse()")]),t._v(" to turn the JSON string into a plain JavaScript object. In the "),s("code",[t._v("dart")]),t._v(" example above we were passing the result of the JSON parsing into\na simple "),s("code",[t._v("Map")]),t._v(" like this: "),s("code",[t._v("Map<String, dynamic> data = json.decode(response.body);")]),t._v(".")]),t._v(" "),s("p",[t._v("Consider that the bare bones approach.")]),t._v(" "),s("p",[t._v("In languages that are more strongly typed, it is considered a best practice to pass that "),s("code",[t._v("Map")]),t._v(" into a custom class object that is specifically designed for our data. We can filter out properties that\nwe don't want, we can do validation on the data, we can provide default values.")]),t._v(" "),s("p",[t._v("This process is similar to what we did in our PWA when we made a call to "),s("code",[t._v("TMDB")]),t._v(" api and then called the "),s("code",[t._v("Array.map")]),t._v(" method to only keep the properties that we wanted to save in the IndexedDB.")]),t._v(" "),s("p",[t._v("Applying this idea in "),s("code",[t._v("dart")]),t._v(" we will create a class and create a variable for each of the properties we want and assign them the proper data types.")]),t._v(" "),s("p",[t._v("Create a folder inside "),s("code",[t._v("/lib")]),t._v(" called "),s("code",[t._v("data")]),t._v(". This is where we will put our "),s("code",[t._v("HttpHelper")]),t._v(" class as well as our custom data object classes.")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /lib/data/movie.dart")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Movie")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  int id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  String title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  String overview"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  DateTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" release_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//nullable")]),t._v("\n  String"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" poster_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//nullable because null is allowed here")]),t._v("\n  double popularity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Movie")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("overview"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("release_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("poster_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("popularity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("Those six variables that we declared will all be available as instance properties of the Movie object. The constructor function will accept a generic Map object and it will destructure the various\nnamed property values from the Map based on the String keys in the Map.")]),t._v(" "),s("p",[t._v("So, this would work but we have no default values or validation. To solve that we are going to add a new "),s("code",[t._v("named constructor")]),t._v(" method inside our "),s("code",[t._v("Movie")]),t._v(" class. All constructors will create an instance\nof your class. You are allowed to have ONE unnamed constructor but as many unnamed constructors as you want.")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("Movie"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromJson")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dynamic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  title "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  overview "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'overview'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release_date'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    release_date "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" DateTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryParse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release_date'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    release_date "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  poster_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'poster_path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default_image.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  popularity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'popularity'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return Movie(id: id,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  title: title,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  overview: overview,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  release_date: release_date,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  poster_path: poster_path,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  popularity: popularity);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("This way we are accepting the full map of data that comes from the API and we are going to assign only the values we want from the Map to our instance variables. We are also using the nullish\ncoalescing operator to check if any of them are null. If they are then we are assigning a default value. We could do more data validation or custom errors here too.")]),t._v(" "),s("p",[t._v("The return statement cannot be used if it is a basic named constructor. Constructors are not allowed to have return statements. However, we can add one and actually use that return statement that\ncalls the default constructor by adding the keyword "),s("code",[t._v("factory")]),t._v(" in front of the "),s("code",[t._v("Movie.fromJson(")])]),t._v(" "),s("h2",{attrs:{id:"working-with-datetime"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-datetime"}},[t._v("#")]),t._v(" Working with DateTime")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://api.dart.dev/stable/2.16.1/dart-core/DateTime-class.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reference for the core DateTime class"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"httphelper"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#httphelper"}},[t._v("#")]),t._v(" HttpHelper")]),t._v(" "),s("p",[t._v("The final step is to build our own helper class to use with api calls. For each API that we are going to use we could create a separate helper class. Inside each helper class we could create a new\nfunction for each endpoint that we want to use.")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /lib/data/http_helper.dart")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./movie.dart'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//our movie data object class")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'package:http/http.dart'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("as")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//to make http calls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dart:async'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//for Future")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dart:convert'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//for JSON to Map conversion")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHelper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" String domain "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'example.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" String path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api/v2/endpoint'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" String apiKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YourApiKeyForThisApi'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Future"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Movie"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("searchMovies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//these are the querystring params")]),t._v("\n    Map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dynamic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'keyword'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lang'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'en'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'apikey'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" apiKey\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//create the URL for the endpoint with parameters")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//we are assuming that our API call is returning one object")]),t._v("\n    Uri uri "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("domain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//make the fetch call to the api")]),t._v("\n    http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Response result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//convert the json string response into a Map")]),t._v("\n    List"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dynamic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonDecode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("as")]),t._v(" List"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dynamic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//pass the Map to the Movie.fromJson method for validation and default values")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//and removal of unwanted properties")]),t._v("\n    Movie movie "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Movie"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromJson")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//return the movie object that we got from the API")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" movie"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//add other functions to handle other endpoints")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])]),s("h2",{attrs:{id:"flutter-cookbook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-cookbook"}},[t._v("#")]),t._v(" Flutter Cookbook")]),t._v(" "),s("p",[t._v("In the Flutter.dev website cookbook section they have a simple example of using the "),s("code",[t._v("http")]),t._v(" package and a custom data class to fetch and use JSON data from an online API.\n"),s("a",{attrs:{href:"https://docs.flutter.dev/cookbook/networking/fetch-data",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flutter fetch cookbook recipe"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"what-to-do-this-week"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-to-do-this-week"}},[t._v("#")]),t._v(" What to do this week")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("TODO Things to do before next week")]),t._v(" "),s("ul",[s("li",[t._v("Work on "),s("RouterLink",{attrs:{to:"/modules/assignments/exer/"}},[t._v("Flutter App 2")])],1),t._v(" "),s("li",[t._v("Read all the notes for modules 12.1, 12.2, 13.1")])])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);